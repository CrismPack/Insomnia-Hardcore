## Give effects if there aren't active on player
execute unless entity @s[nbt={ActiveEffects:[{Id:2}]}] run effect give @s slowness 999999 255 true
execute unless entity @s[nbt={ActiveEffects:[{Id:8}]}] run effect give @s jump_boost 999999 128 true
scoreboard players set @s freezeStatus 1

## Getting milks
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run scoreboard players add @s freezeMilkCount 1
execute if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}] if score #fp fpGetMilks matches 1 run clear @s milk_bucket 1

execute if score #fp fpFreezeMsg matches 1 run tellraw @s {"text":"The Operator has frozen you. If you've got any milk, you'll get all your milk buckets back once you get unfreeze. Don't worry :)","color":"yellow"}

## Save gamemode
execute if score #fp fp matches 1 run execute if entity @s[gamemode=survival] run scoreboard players set @s freezeGamemode 1
execute if entity @s[gamemode=creative] run scoreboard players set @s freezeGamemode 2
execute if entity @s[gamemode=spectator] run scoreboard players set @s freezeGamemode 3
execute if entity @s[gamemode=adventure] run scoreboard players set @s freezeGamemode 4
execute if score #fp fpSetToAdventure matches 1 run gamemode adventure @s

## Set the player's position
#spreadplayers ~ ~ 0 1 true @s

## Build the Cage
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~-1 ~ grass run setblock ~ ~-1 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~2 ~ grass run setblock ~ ~2 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~1 ~ ~ grass run setblock ~1 ~ ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~1 ~1 ~ grass run setblock ~1 ~1 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~-1 ~ ~ grass run setblock ~-1 ~ ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~-1 ~1 ~ grass run setblock ~-1 ~1 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~ ~1 grass run setblock ~ ~ ~1 air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~1 ~1 grass run setblock ~ ~1 ~1 air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~ ~-1 grass run setblock ~ ~ ~-1 air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~1 ~-1 grass run setblock ~ ~1 ~-1 air

execute if score #fp fpBuildCage matches 1 run execute if block ~ ~-1 ~ tall_grass run setblock ~ ~-1 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~2 ~ tall_grass run setblock ~ ~2 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~1 ~ ~ tall_grass run setblock ~1 ~ ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~1 ~1 ~ tall_grass run setblock ~1 ~1 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~-1 ~ ~ tall_grass run setblock ~-1 ~ ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~-1 ~1 ~ tall_grass run setblock ~-1 ~1 ~ air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~ ~1 tall_grass run setblock ~ ~ ~1 air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~1 ~1 tall_grass run setblock ~ ~1 ~1 air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~ ~-1 tall_grass run setblock ~ ~ ~-1 air 
execute if score #fp fpBuildCage matches 1 run execute if block ~ ~1 ~-1 tall_grass run setblock ~ ~1 ~-1 air

execute if score #fp fpBuildCage matches 1 run setblock ~ ~-1 ~ barrier keep
execute if score #fp fpBuildCage matches 1 run setblock ~ ~2 ~ barrier keep
execute if score #fp fpBuildCage matches 1 run setblock ~1 ~ ~ barrier keep
execute if score #fp fpBuildCage matches 1 run setblock ~-1 ~ ~ barrier keep
execute if score #fp fpBuildCage matches 1 run setblock ~ ~ ~1 barrier keep
execute if score #fp fpBuildCage matches 1 run setblock ~ ~ ~-1 barrier keep